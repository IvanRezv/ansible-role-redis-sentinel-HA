# {{ ansible_managed }}
daemonize yes
pidfile /var/run/redis/{{ redis_daemon }}.pid
bind {{ redis_bind_loop }} {{ ansible_default_ipv4.address }}
port {{ redis_port }}

{% if redis_unixsocket %}
unixsocket {{ redis_unixsocket }}
{% endif %}
timeout {{ redis_timeout }}
loglevel {{ redis_loglevel }}
logfile {{ redis_logfile }}

databases {{ redis_databases }}
rdbcompression {{ redis_rdbcompression }}
dbfilename {{ redis_dbfilename }}
dir {{ redis_dbdir }}
{% if redis_maxmemory %}
maxmemory {{ redis_maxmemory }}
maxmemory-policy {{ redis_maxmemory_policy }}
maxmemory-samples {{ redis_maxmemory_samples }}
{% endif %}
appendonly no
no-appendfsync-on-rewrite no
{% for include in redis_includes %}
include {{ include }}
{% endfor %}

{% if redis_master_auth %}
masterauth "{{ redis_master_auth }}"
{% endif %}
{% if redis_requirepass %}
requirepass "{{ redis_requirepass }}"
{% endif %}

{% for redis_disabled_command in redis_disabled_commands %}
rename-command {{ redis_disabled_command }} ""
{% endfor %}
