---
 #COPY PORT 1 FILES
- name: Copy redis master conf
  template:
    src: master-conf.j2
    dest: "/etc/redis/redis.conf"
  when: "inventory_hostname in groups['redis']"
#  when: "inventory_hostname in groups['redis'] and redis-role == master"

- name: Copy Redis slave conf
  template:
    src: slave-conf.j2
    dest: "/etc/redis/redis.conf"
  when: "inventory_hostname in groups['redis']"
#  when: "inventory_hostname in groups['redis'] and redis-role == slave"

 #COPY PORT 2 FILES
- name: Copy Redis-Sentinel slave conf
  template:
    src: sentinel.j2
    dest: "/etc/redis/sentinel.conf"
  when: "inventory_hostname in groups['sentinel'] or inventory_hostname in groups['redis']"
#  when: "inventory_hostname in groups['redis-ha'] and redis-role=slave"

 #COPY PORT 2 FILES
#- name: Copy Redis-Sentinel master conf
#  template:
#    src: sentinel-master.j2
#    dest: "/etc/redis/sentinel.conf"
#  when: "inventory_hostname in groups['redis']"

 #COPY PORT 2 FILES
#- name: Copy Redis-Sentinel slave conf
#  template:
#    src: sentinel-master.j2
#    dest: "/etc/redis/sentinel.conf"
#  when: "inventory_hostname in groups['sentinel']"
#  when: "inventory_hostname in groups['redis-ha'] and redis-role=slave"

 #COPY PORT 2 FILES
#- name: Copy Redis Sentinel ISO conf
#  template:
#    src: sentinel-master.j2
#    dest: "/etc/redis/sentinel.conf"
#  when: "inventory_hostname in groups['sentinel'] and redis-role=iso"
